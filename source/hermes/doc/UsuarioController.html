<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: UsuarioController
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!UsuarioController.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (U)</a> &raquo;
    
    
    <span class="title">UsuarioController</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: UsuarioController
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next">UsuarioController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/controllers/usuario_controller.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#buscar_paquete-instance_method" title="#buscar_paquete (instance method)">- (Json) <strong>buscar_paquete</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Representacion en formato json del paquete encontrado.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_api_token-instance_method" title="#check_api_token (instance method)">- (Json) <strong>check_api_token</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>La representacion de un mensaje 403 en  caso de acceso no autorizado o no
contener el parametro &#39;api-token&#39; en la cabecera.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#listar_paquete-instance_method" title="#listar_paquete (instance method)">- (Json) <strong>listar_paquete</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Representacion en formato json de los paquetes  encontrados.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ver_paquete-instance_method" title="#ver_paquete (instance method)">- (Json) <strong>ver_paquete</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Representacion en formato json del paquete encontrado.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="buscar_paquete-instance_method">
  
    - (<tt>Json</tt>) <strong>buscar_paquete</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Parametro &#39;api-token&#39; requerido en cabecera HTTP.</p>
</div>
  </div>


<p>Returns representacion en formato json del paquete encontrado.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Ejemplo de json en caso de retorno</p>
</div></p>
      
      <pre class="example code"><code>{
    &quot;err_mssg&quot;: &quot;&quot;,
    &quot;success_mssg&quot;: &quot;OK&quot;,
    &quot;data&quot;: { 
               &quot;id&quot;: 17,
               &quot;ancho&quot;: 2,
               &quot;alto&quot;: 2,
               &quot;peso&quot;: 4,
               &quot;costo&quot;: 2.35,
               &quot;profundidad&quot;: 3,
               &quot;descripcion&quot;: &quot;Test&quot;,
               &quot;numero_guia&quot;: &quot;57921cab6d7d1d1c848747a14336345573dc00fb&quot;,
               &quot;agencia_paquete&quot;: {
				&quot;id&quot;: 8,
				&quot;fecha_arribo&quot;: &quot;2014-09-26T21:29:39.152Z&quot;,
				&quot;tipo_estado&quot;: &quot;R&quot;,
				&quot;paquete&quot;: { Recursivo },
				&quot;agencia&quot;: {
					&quot;id&quot;: 15,
					&quot;nombre&quot;: &quot;Hermes CCS&quot;,
					&quot;ubicacion&quot;: &quot;Caracas&quot;,
					&quot;latitud&quot;: &quot;13554.1546&quot;,
					&quot;longitud&quot;: &quot;5466487.425&quot;,
					&quot;empresa&quot;: &quot;Hermes&quot;,
				}
               },
               &quot;emisor&quot;: {
                   &quot;id&quot;: 14,
                   &quot;nombre&quot;: &quot;operador&quot;,
                   &quot;apellido&quot;: &quot;Prueba&quot;,
                   &quot;correo_electronico&quot;: &quot;o@m.com&quot;,
                   &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-26T21:29:39.060Z&quot;,
                   &quot;tipo_usuario&quot;: {
                       &quot;id&quot;: 2,
                       &quot;nombre&quot;: &quot;Operador&quot;,
                       &quot;abreviacion&quot;: &quot;O&quot;
                   }
               },
               &quot;receptor&quot;: {
                   &quot;id&quot;: 13,
                   &quot;nombre&quot;: &quot;Administrador&quot;,
                   &quot;apellido&quot;: &quot;Prueba&quot;,
                   &quot;correo_electronico&quot;: &quot;a@m.com&quot;,
                   &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-27T00:18:14.693Z&quot;,
                   &quot;tipo_usuario&quot;: {
                       &quot;id&quot;: 1,
                       &quot;nombre&quot;: &quot;Administrador&quot;,
                       &quot;abreviacion&quot;: &quot;A&quot;
                   }
               }
    }
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>numero_guia</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>numero de guia perteneciente al paquete  enviado o recibido.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Json</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>representacion en formato json del paquete encontrado.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/usuario_controller.rb', line 224</span>

<span class='kw'>def</span> <span class='id identifier rubyid_buscar_paquete'>buscar_paquete</span>
	<span class='kw'>begin</span>
		<span class='id identifier rubyid_prms'>prms</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_permit'>permit</span><span class='lparen'>(</span>
			<span class='symbol'>:numero_guia</span>
		<span class='rparen'>)</span>

		<span class='id identifier rubyid_stt'>stt</span> <span class='op'>=</span> <span class='const'>AgenciaPaquete</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span>
			<span class='label'>paquete:</span> <span class='const'>Paquete</span><span class='period'>.</span><span class='id identifier rubyid_find_by!'>find_by!</span><span class='lparen'>(</span>
				<span class='label'>numero_guia:</span> <span class='id identifier rubyid_prms'>prms</span><span class='period'>.</span><span class='id identifier rubyid_require'>require</span><span class='lparen'>(</span><span class='symbol'>:numero_guia</span><span class='rparen'>)</span>
			<span class='rparen'>)</span>
		<span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:fecha_arribo</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reverse_order'>reverse_order</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

		<span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
				<span class='label'>err_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
				<span class='label'>success_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
				<span class='label'>data:</span> <span class='id identifier rubyid_stt'>stt</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span>
			<span class='rbrace'>}</span><span class='comma'>,</span>
			<span class='label'>status:</span> <span class='symbol'>:ok</span>
		
	<span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
		<span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
				<span class='label'>err_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No ha sido posible obtener informacion del paquete- Motivo: </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span>
				<span class='label'>success_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
			<span class='rbrace'>}</span><span class='comma'>,</span>
			<span class='label'>status:</span> <span class='symbol'>:bad_request</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_api_token-instance_method">
  
    - (<tt>Json</tt>) <strong>check_api_token</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns la representacion de un mensaje 403 en  caso de acceso no
autorizado o no contener el parametro &#39;api-token&#39; en la cabecera.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Json</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>la representacion de un mensaje 403 en  caso de acceso no autorizado o no
contener el parametro &#39;api-token&#39; en la cabecera.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/usuario_controller.rb', line 362</span>

<span class='kw'>def</span> <span class='id identifier rubyid_check_api_token'>check_api_token</span>		
	<span class='kw'>begin</span>
		<span class='kw'>if</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api-token</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
			<span class='id identifier rubyid_atoken'>atoken</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>api-token</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
		<span class='kw'>else</span>
			<span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Parametro de identificacion api-token requerido en header http</span><span class='tstring_end'>&quot;</span></span>
		<span class='kw'>end</span>

		<span class='id identifier rubyid_u'>u</span> <span class='op'>=</span> <span class='const'>Usuario</span><span class='period'>.</span><span class='id identifier rubyid_find_by!'>find_by!</span><span class='lparen'>(</span>
			<span class='label'>api_token:</span> <span class='id identifier rubyid_atoken'>atoken</span> 
		<span class='rparen'>)</span>

		<span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_u'>u</span><span class='period'>.</span><span class='id identifier rubyid_tipo_usuario'>tipo_usuario</span><span class='period'>.</span><span class='id identifier rubyid_abreviacion'>abreviacion</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UA</span><span class='tstring_end'>&quot;</span></span>
			<span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Se requieren privilegios de usuario para tener acceso a estas funcionalidades</span><span class='tstring_end'>&quot;</span></span>
		<span class='kw'>end</span>
	
	<span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
		<span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
			<span class='label'>err_mssg:</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span>
			<span class='label'>success_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
			<span class='rbrace'>}</span><span class='comma'>,</span> <span class='label'>status:</span> 	<span class='symbol'>:unauthorized</span>			
	<span class='kw'>end</span>		
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="listar_paquete-instance_method">
  
    - (<tt>Json</tt>) <strong>listar_paquete</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Parametro &#39;api-token&#39; requerido en cabecera HTTP</p>
</div>
  </div>


<p>Returns representacion en formato json de los paquetes  encontrados</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Ejemplo de json en caso de retorno</p>
</div></p>
      
      <pre class="example code"><code>{
    &quot;err_mssg&quot;: &quot;&quot;,
    &quot;success_mssg&quot;: &quot;OK&quot;,
    &quot;data&quot;: {
        &quot;como_emisor&quot;: [
            {
                &quot;id&quot;: 15,
                &quot;ancho&quot;: 5,
                &quot;alto&quot;: 5,
                &quot;peso&quot;: 0.15,
                &quot;costo&quot;: 24.5,
                &quot;profundidad&quot;: 10,
                &quot;descripcion&quot;: &quot;Teclado&quot;,
                &quot;numero_guia&quot;: &quot;1acae99bed11b1424527f4c930907fc498273739&quot;,
                &quot;agencia_paquete&quot;: {
					&quot;id&quot;: 8,
					&quot;fecha_arribo&quot;: &quot;2014-09-26T21:29:39.152Z&quot;,
					&quot;tipo_estado&quot;: &quot;R&quot;,
					&quot;paquete&quot;: { Recursivo },
					&quot;agencia&quot;: {
						&quot;id&quot;: 15,
						&quot;nombre&quot;: &quot;Hermes CCS&quot;,
						&quot;ubicacion&quot;: &quot;Caracas&quot;,
						&quot;latitud&quot;: &quot;13554.1546&quot;,
						&quot;longitud&quot;: &quot;5466487.425&quot;,
						&quot;empresa&quot;: &quot;Hermes&quot;,
					}
               	},
                &quot;emisor&quot;: {
                    &quot;id&quot;: 13,
                    &quot;nombre&quot;: &quot;Administrador&quot;,
                    &quot;apellido&quot;: &quot;Prueba&quot;,
                    &quot;correo_electronico&quot;: &quot;a@m.com&quot;,
                    &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-27T00:18:14.693Z&quot;,
                    &quot;tipo_usuario&quot;: {
                        &quot;id&quot;: 1,
                        &quot;nombre&quot;: &quot;Administrador&quot;,
                        &quot;abreviacion&quot;: &quot;A&quot;
                    }
                },
                &quot;receptor&quot;: {
                    &quot;id&quot;: 12,
                    &quot;nombre&quot;: &quot;cliente&quot;,
                    &quot;apellido&quot;: &quot;prueba&quot;,
                    &quot;correo_electronico&quot;: &quot;c@m.com&quot;,
                    &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-26T22:41:43.804Z&quot;,
                    &quot;tipo_usuario&quot;: {
                        &quot;id&quot;: 3,
                        &quot;nombre&quot;: &quot;Usuario Afiliado&quot;,
                        &quot;abreviacion&quot;: &quot;UA&quot;
                    }
                }
            },            
        ],
        &quot;como_receptor&quot;: [
            {
                &quot;id&quot;: 17,
                &quot;ancho&quot;: 2,
                &quot;alto&quot;: 2,
                &quot;peso&quot;: 4,
                &quot;costo&quot;: 2.35,
                &quot;profundidad&quot;: 3,
                &quot;descripcion&quot;: &quot;Test&quot;,
                &quot;numero_guia&quot;: &quot;57921cab6d7d1d1c848747a14336345573dc00fb&quot;,
                &quot;agencia_paquete&quot;: {
					&quot;id&quot;: 8,
					&quot;fecha_arribo&quot;: &quot;2014-09-26T21:29:39.152Z&quot;,
					&quot;tipo_estado&quot;: &quot;R&quot;,
					&quot;paquete&quot;: { Recursivo },
					&quot;agencia&quot;: {
						&quot;id&quot;: 15,
						&quot;nombre&quot;: &quot;Hermes CCS&quot;,
						&quot;ubicacion&quot;: &quot;Caracas&quot;,
						&quot;latitud&quot;: &quot;13554.1546&quot;,
						&quot;longitud&quot;: &quot;5466487.425&quot;,
						&quot;empresa&quot;: &quot;Hermes&quot;,
					}
                },
                &quot;emisor&quot;: {
                    &quot;id&quot;: 14,
                    &quot;nombre&quot;: &quot;operador&quot;,
                    &quot;apellido&quot;: &quot;Prueba&quot;,
                    &quot;correo_electronico&quot;: &quot;o@m.com&quot;,
                    &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-26T21:29:39.060Z&quot;,
                    &quot;tipo_usuario&quot;: {
                        &quot;id&quot;: 2,
                        &quot;nombre&quot;: &quot;Operador&quot;,
                        &quot;abreviacion&quot;: &quot;O&quot;
                    }
                },
                &quot;receptor&quot;: {
                    &quot;id&quot;: 13,
                    &quot;nombre&quot;: &quot;Administrador&quot;,
                    &quot;apellido&quot;: &quot;Prueba&quot;,
                    &quot;correo_electronico&quot;: &quot;a@m.com&quot;,
                    &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-27T00:18:14.693Z&quot;,
                    &quot;tipo_usuario&quot;: {
                        &quot;id&quot;: 1,
                        &quot;nombre&quot;: &quot;Administrador&quot;,
                        &quot;abreviacion&quot;: &quot;A&quot;
                    }
                }
            }
        ]
    }
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>email</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>correo electronico del usuario que ha  enviado o recibido el paquete a
listar</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Json</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>representacion en formato json de los paquetes  encontrados</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/usuario_controller.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_listar_paquete'>listar_paquete</span>
	<span class='kw'>begin</span>
		<span class='id identifier rubyid_prms'>prms</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_permit'>permit</span><span class='lparen'>(</span>
			<span class='symbol'>:email</span>
		<span class='rparen'>)</span>
		
		<span class='id identifier rubyid_u'>u</span> <span class='op'>=</span> <span class='const'>Usuario</span><span class='period'>.</span><span class='id identifier rubyid_find_by!'>find_by!</span><span class='lparen'>(</span>
			<span class='label'>correo_electronico:</span> <span class='id identifier rubyid_prms'>prms</span><span class='period'>.</span><span class='id identifier rubyid_require'>require</span><span class='lparen'>(</span><span class='symbol'>:email</span><span class='rparen'>)</span>
		<span class='rparen'>)</span>
		<span class='id identifier rubyid_stt_e'>stt_e</span> <span class='op'>=</span> <span class='const'>Paquete</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>emisor:</span> <span class='id identifier rubyid_u'>u</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_stt_r'>stt_r</span> <span class='op'>=</span> <span class='const'>Paquete</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>receptor:</span> <span class='id identifier rubyid_u'>u</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
			<span class='symbol'>:como_emisor</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_stt_e'>stt_e</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span><span class='comma'>,</span>
			<span class='symbol'>:como_receptor</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_stt_r'>stt_r</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span>
		<span class='rbrace'>}</span>

		<span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
				<span class='label'>err_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
				<span class='label'>success_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
				<span class='label'>data:</span> <span class='id identifier rubyid_data'>data</span>
			<span class='rbrace'>}</span><span class='comma'>,</span>
			<span class='label'>status:</span> <span class='symbol'>:ok</span>
	<span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
		<span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
			<span class='label'>err_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error durante la busqueda debido a : </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span>
			<span class='label'>success_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
		<span class='rbrace'>}</span><span class='comma'>,</span>
		<span class='label'>status:</span> <span class='symbol'>:bad_request</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ver_paquete-instance_method">
  
    - (<tt>Json</tt>) <strong>ver_paquete</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Parametro &#39;api-token&#39; requerido en cabecera HTTP.</p>
</div>
  </div>


<p>Returns representacion en formato json del paquete encontrado.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Ejemplo de json en caso de retorno</p>
</div></p>
      
      <pre class="example code"><code>{
    &quot;err_mssg&quot;: &quot;&quot;,
    &quot;success_mssg&quot;: &quot;OK&quot;,
    &quot;data&quot;: {
	    &quot;trensaccion&quot;: { 
	    		&quot;id&quot;: 8,
				&quot;fecha_arribo&quot;: &quot;2014-09-26T21:29:39.152Z&quot;,
				&quot;tipo_estado&quot;: &quot;R&quot;,
				&quot;paquete&quot;: { 
					&quot;id&quot;: 17,
	                &quot;ancho&quot;: 2,
	                &quot;alto&quot;: 2,
	                &quot;peso&quot;: 4,
	                &quot;costo&quot;: 2.35,
	                &quot;profundidad&quot;: 3,
	                &quot;descripcion&quot;: &quot;Test&quot;,
	                &quot;numero_guia&quot;: &quot;57921cab6d7d1d1c848747a14336345573dc00fb&quot;,
	                &quot;agencia_paquete&quot;: { Recursivo
	                },
	                &quot;emisor&quot;: {
	                    &quot;id&quot;: 14,
	                    &quot;nombre&quot;: &quot;operador&quot;,
	                    &quot;apellido&quot;: &quot;Prueba&quot;,
	                    &quot;correo_electronico&quot;: &quot;o@m.com&quot;,
	                    &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-26T21:29:39.060Z&quot;,
	                    &quot;tipo_usuario&quot;: {
	                        &quot;id&quot;: 2,
	                        &quot;nombre&quot;: &quot;Operador&quot;,
	                        &quot;abreviacion&quot;: &quot;O&quot;
	                    }
	                },
	                &quot;receptor&quot;: {
	                    &quot;id&quot;: 13,
	                    &quot;nombre&quot;: &quot;Administrador&quot;,
	                    &quot;apellido&quot;: &quot;Prueba&quot;,
	                    &quot;correo_electronico&quot;: &quot;a@m.com&quot;,
	                    &quot;fecha_ultimo_acceso&quot;: &quot;2014-09-27T00:18:14.693Z&quot;,
	                    &quot;tipo_usuario&quot;: {
	                        &quot;id&quot;: 1,
	                        &quot;nombre&quot;: &quot;Administrador&quot;,
	                        &quot;abreviacion&quot;: &quot;A&quot;
	                    }
                },
				&quot;agencia&quot;: {
				&quot;id&quot;: 15,
					&quot;nombre&quot;: &quot;Hermes CCS&quot;,
					&quot;ubicacion&quot;: &quot;Caracas&quot;,
					&quot;latitud&quot;: &quot;13554.1546&quot;,
					&quot;longitud&quot;: &quot;5466487.425&quot;,
					&quot;empresa&quot;: &quot;Hermes&quot;,
			   	}

        }
	}	
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>'id'String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>del paquete que desea ver.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Json</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>representacion en formato json del paquete encontrado.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/usuario_controller.rb', line 322</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ver_paquete'>ver_paquete</span>
	<span class='kw'>begin</span>
		<span class='id identifier rubyid_prms'>prms</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_permit'>permit</span><span class='lparen'>(</span>
			<span class='symbol'>:id</span>
		<span class='rparen'>)</span>

		<span class='id identifier rubyid_pq'>pq</span> <span class='op'>=</span> <span class='const'>Paquete</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span>
			<span class='id identifier rubyid_prms'>prms</span><span class='period'>.</span><span class='id identifier rubyid_require'>require</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
		<span class='rparen'>)</span>

		<span class='id identifier rubyid_stt'>stt</span> <span class='op'>=</span> <span class='const'>AgenciaPaquete</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span>
				<span class='label'>paquete:</span> <span class='id identifier rubyid_pq'>pq</span>
			<span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span>
					<span class='symbol'>:fecha_arribo</span>
				<span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reverse_order'>reverse_order</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

		<span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
				<span class='label'>err_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
				<span class='label'>success_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
				<span class='label'>data:</span> <span class='lbrace'>{</span><span class='symbol'>:transaccion</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_stt'>stt</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span><span class='rbrace'>}</span>
			<span class='rbrace'>}</span><span class='comma'>,</span>
			<span class='label'>status:</span> <span class='symbol'>:ok</span>
				
	<span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
		<span class='id identifier rubyid_msg'>msg</span><span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Lo sentimos pero ha ocurrido un problema con la creacion del paquete</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
				<span class='label'>err_mssg:</span> <span class='id identifier rubyid_msg'>msg</span><span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> - Motivo: </span><span class='tstring_end'>&quot;</span></span><span class='op'>+</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span>
				<span class='label'>success_mssg:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
			<span class='rbrace'>}</span><span class='comma'>,</span>
			<span class='label'>status:</span> <span class='symbol'>:bad_request</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Nov  3 04:56:05 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.1.2).
</div>

  </body>
</html>